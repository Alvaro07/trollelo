(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),o=a.n(c),s=a(15),i=a(26),l=a(6),u=a(1),d=function(e){return{type:"SET_LOGIN",boolean:e}},m=function(e){return{type:"SET_USER",data:e}},f=function(e){return{type:"SHOW_MODAL",modal:e}},p=function(e){return{type:"SET_BOARDS",boards:e}},b=function(e){return{type:"SET_DATA_BOARD",data:e}},h=a(47),g=Object(h.b)(function(e,t){var a=Object(u.a)({},e);switch(t.type){case"SET_LOADING":return Object(u.a)({},a,{isLoading:t.boolean});case"SET_LOGIN":return Object(u.a)({},a,{isLogin:t.boolean});case"SET_USER":return Object(u.a)({},a,{dataUser:t.data});case"SHOW_MODAL":return Object(u.a)({},a,{modal:t.modal});case"HIDE_MODAL":return Object(u.a)({},a,{modal:null});case"SET_BOARDS":return Object(u.a)({},a,{userBoards:t.boards});case"SET_DATA_BOARD":return Object(u.a)({},a,{boardData:t.data});default:return a}},{isLogin:!1},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()),E=(a(87),a(5)),k=a(7),O=a.n(k),_=a(12),v=a(20),j=a.n(v),w=(a(136),a(138),a(163),a(142),{apiKey:"AIzaSyBX9MFiIyLvo3f9athVr7r9aWCd69mfINA",authDomain:"trolello-react.firebaseapp.com",databaseURL:"https://trolello-react.firebaseio.com",projectId:"trolello-react",storageBucket:"trolello-react.appspot.com",messagingSenderId:"682014830422"});j.a.initializeApp(w);new j.a.auth.GoogleAuthProvider;var y=j.a.auth(),x=j.a.storage(),N=(j.a.functions(),j.a.firestore());j.a;function T(){return(T=Object(_.a)(O.a.mark(function e(t,a,n){var r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,L(t);case 4:return e.abrupt("return",{exists:!0,message:"The user name already exists"});case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,e.next=12,C(a,n);case 12:r=e.sent,e.next=18;break;case 15:return e.prev=15,e.t1=e.catch(9),e.abrupt("return",e.t1);case 18:return e.next=20,D(t,a,n,r.user.uid);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}},e,null,[[1,7],[9,15]])}))).apply(this,arguments)}function D(e,t,a,n){return new Promise(function(r,c){N.collection("users").doc(e).set({user:e,email:t,password:a,id:n,boards:[]}).then(function(e){return r()}).catch(function(e){return c(e)})})}function C(e,t){return new Promise(function(a,n){y.createUserWithEmailAndPassword(e,t).then(function(e){return a(e)}).catch(function(e){return n(e)})})}function U(){return new Promise(function(e,t){y.onAuthStateChanged(function(a){var n;a?(n=a.email,new Promise(function(e,t){N.collection("users").where("email","==",n).get().then(function(a){return a.empty?t("The user not exists"):a.forEach(function(t){return e(t.data())})}).catch(function(e){return t(e)})})).then(function(t){e(t)}):t("No user is signed in")})})}function L(e){return new Promise(function(t,a){N.collection("users").where("user","==",e).get().then(function(e){return e.empty?a("The user not exists"):e.forEach(function(e){return t(e.data())})}).catch(function(e){return a(e)})})}var M=a(8),S=(a(144),function(e){var t=e.extraClass?e.extraClass:"",a=e.error?"c-input-text--error":"";return r.a.createElement("div",{className:"c-input-text ".concat(a," ").concat(t)},e.labelText&&r.a.createElement("label",{className:"c-input-text__label",htmlFor:e.id},e.labelText),r.a.createElement("div",{className:"c-input-text__field"},e.icon&&r.a.createElement("div",{className:"c-input-text__icon"},r.a.createElement(M.a,{icon:e.icon})),r.a.createElement("input",{type:e.type,id:e.id,placeholder:e.placeholder,onKeyUp:e.onKeyUp,onChange:e.onChange,required:e.required?"required":null,defaultValue:e.value?e.value:""})))}),B=(a(145),function(e){var t=e.text,a=e.secondary,n=e.terciary,c=e.size,o=e.extraClass,s=e.onClick,i=e.icon,l=(e.submit,e.isLoading),u=o||"",d=a?"c-button--secondary":"",m=n?"c-button--terciary":"",f=c&&"small"===c?"c-button--small":"",p=i?r.a.createElement(M.a,{icon:i,className:"c-button__icon"}):"";return r.a.createElement("button",{type:"submit",className:"c-button ".concat(d," ").concat(m," ").concat(l?"c-button--loading":""," ").concat(f," ").concat(u),onClick:s},!l&&p,l?r.a.createElement(M.a,{icon:"spinner",className:"c-button__load-icon"}):null,l?"Loading":t)}),V=(a(146),function(){return r.a.createElement("div",{className:"loader-wrap"},r.a.createElement("div",{className:"c-loader"}))}),I=(a(147),Object(l.b)(function(e){return{state:e}},function(e){return{setLogin:function(t){return e(d(t))},setUser:function(t){return e(m(t))}}})(function(e){var t=Object(n.useState)({user:"",password:"",isValid:!0,errorMessage:"Complete all the fields to login"}),a=Object(E.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)({user:"",email:"",password:"",isValid:!0,errorMessage:"The register is not complete"}),l=Object(E.a)(s,2),d=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(E.a)(f,2),b=p[0],h=p[1],g=Object(n.useState)(!0),k=Object(E.a)(g,2),O=k[0],_=k[1],v=Object(n.useState)(!1),j=Object(E.a)(v,2),w=j[0],x=j[1],N=Object(n.useState)(!1),D=Object(E.a)(N,2),C=D[0],M=D[1];Object(n.useEffect)(function(){U().then(function(t){e.setUser(t),e.setLogin(!0),_(!1)}).catch(function(){_(!1)})},[]),Object(n.useEffect)(function(){setTimeout(function(){h(!1)},500)},[b]);var I=function(t){t.preventDefault(),x(!0),c.user.length&&c.password.length?(o(Object(u.a)({},c,{isValid:!0})),L(c.user).then(function(t){var a,n;(a=t.email,n=c.password,new Promise(function(e,t){y.signInWithEmailAndPassword(a,n).then(function(){return e()}).catch(function(e){return t(e)})})).then(function(){e.setUser({user:t.user,email:t.email}),e.setLogin(!0)}).catch(function(e){x(!1),o(Object(u.a)({},c,{isValid:!1,errorMessage:e.message})),h(!0)})}).catch(function(e){x(!1),o(Object(u.a)({},c,{isValid:!1,errorMessage:e})),h(!0)})):(o(Object(u.a)({},c,{isValid:!1})),h(!0),x(!1))},P=function(t){t.preventDefault(),M(!0),d.user.length&&d.email.length&&d.password.length?function(e,t,a){return T.apply(this,arguments)}(d.user,d.email,d.password).then(function(t){t.message?(m(Object(u.a)({},d,{isValid:!1,errorMessage:t.message})),h(!0),M(!1)):(m(Object(u.a)({},d,{isValid:!0})),e.setUser({user:d.user,email:d.email}),e.setLogin(!0))}):(m(Object(u.a)({},d,{isValid:!1})),h(!0),M(!1))};return O?r.a.createElement(V,null):e.state.isLogin?r.a.createElement(i.a,{from:"/trollelo/",to:"/trollelo/dashboard"}):r.a.createElement("section",{className:"login-wrap"},r.a.createElement("header",{className:"login-wrap__header"},r.a.createElement("h1",{className:"login-wrap__header__brand"},"Trolello")),r.a.createElement("main",{className:"login ".concat(!0===b?"login--shake":"")},r.a.createElement("form",{className:"login__form",method:"POST"},r.a.createElement("h2",{className:"login__title"},"Sign in"),r.a.createElement(S,{type:"text",id:"signInUser",placeholder:"User",extraClass:"margin-bottom-10",icon:"user",onKeyUp:function(e){return o(Object(u.a)({},c,{user:e.target.value}))},error:!1===c.isValid&&!c.user.length,required:!0}),r.a.createElement(S,{type:"password",id:"signInPassword",placeholder:"Password",extraClass:"margin-bottom-20",icon:"key",onKeyUp:function(e){return o(Object(u.a)({},c,{password:e.target.value}))},error:!1===c.isValid&&!c.password.length,required:!0}),r.a.createElement(B,{text:"Log in",onClick:function(e){return I(e)},isLoading:w}),!1===c.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},c.errorMessage)),r.a.createElement("form",{className:"login__form",method:"POST"},r.a.createElement("h2",{className:"login__title"},"Register"),r.a.createElement(S,{type:"text",id:"registerUser",placeholder:"User",icon:"user",extraClass:"margin-bottom-10",onKeyUp:function(e){return m(Object(u.a)({},d,{user:e.target.value}))},error:!1===d.isValid&&!d.user.length,required:!0}),r.a.createElement(S,{type:"email",id:"registerEmail",placeholder:"Email",icon:"envelope",extraClass:"margin-bottom-10",onKeyUp:function(e){return m(Object(u.a)({},d,{email:e.target.value}))},error:!d.isValid&&!d.email.length,required:!0}),r.a.createElement(S,{type:"password",id:"registerPassword",placeholder:"Password",icon:"key",extraClass:"margin-bottom-20",onKeyUp:function(e){return m(Object(u.a)({},d,{password:e.target.value}))},error:!1===d.isValid&&!d.password.length,required:!0}),r.a.createElement(B,{text:"Register",type:"secondary",onClick:function(e){return P(e)},isLoading:C}),!1===d.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},d.errorMessage))))})),P=a(21);function A(){return(A=Object(_.a)(O.a.mark(function e(t,a,n){var r,c;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return r=e.sent,e.next=5,R(t,a,n);case 5:return c=e.sent,e.next=8,K(r.boards,c,r.user);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e,t,a){return new Promise(function(n,r){var c=N.collection("boards").doc();c.set({owner:e,name:t,description:a,id:c.id,tasklists:[]}).then(function(){return n(c.id)}).catch(function(e){return r(e)})})}function K(e,t,a){return new Promise(function(n,r){N.collection("users").doc(a).update({boards:[].concat(Object(P.a)(e),[t])}).then(function(){return n()}).catch(function(e){return r(e)})})}function q(e){return new Promise(function(t,a){N.collection("boards").doc(e).get().then(function(e){return t(e.data())}).catch(function(e){return a(e)})})}function F(e){return new Promise(function(t,a){N.collection("boards").get().then(function(n){var r=[];return n.forEach(function(e){r.push(e.data())}),n.empty?a("no boards"):t(r.filter(function(t){return t.owner===e}))}).catch(function(e){return a(e)})})}function z(){return(z=Object(_.a)(O.a.mark(function e(t,a){var n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N.collection("users").doc(a),e.next=3,N.collection("boards").doc(t).delete();case 3:return e.next=5,L(a);case 5:return r=e.sent,e.next=8,n.update({boards:r.boards.filter(function(e){return e!==t})});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}a(153);var H=Object(l.b)(function(e){return{state:e}},function(e){return{setLogin:function(t){return e(d(t))},setUser:function(t){return e(m(t))},setBoards:function(t){return e(p(t))}}})(function(e){var t=null;return void 0!==e.location&&e.location.pathname.match("TaskBoard")&&(t=r.a.createElement("div",{className:"c-header__return-btn"},r.a.createElement(s.b,{to:"/trollelo/dashboard"},r.a.createElement(M.a,{icon:"align-left"})))),r.a.createElement("header",{className:"c-header"},r.a.createElement("div",{className:"c-header__wrap"},t,r.a.createElement("h1",{className:"c-header__logo"},r.a.createElement(s.b,{to:"/trollelo/dashboard"},"Trollelo")),r.a.createElement("div",{className:"c-header__actions"},r.a.createElement(B,{secondary:!0,text:"logOut",size:"small",icon:"sign-in-alt",onClick:function(){y.signOut().then(function(){e.setLogin(!1),e.setUser(null),e.setBoards(null)})}}))))});var W=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)(function(){var a,n=document.querySelector("#".concat(e)),r=n||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);return n||(a=r,document.body.insertBefore(a,document.body.lastElementChild.nextElementSibling)),r.appendChild(t.current),function(){t.current.remove(),-1===r.childNodes.length&&r.remove()}},[]),t.current||(t.current=document.createElement("div")),t.current},X=a(3),G=function(e){var t=e.children,a=W("modal");return Object(c.createPortal)(t,a)};G.propTypes={children:a.n(X).a.element.isRequired};var J=G,Q=(a(154),Object(l.b)(function(e){return{state:e}},function(e){return{hideModal:function(){return e({type:"HIDE_MODAL"})}}})(function(e){var t=e.modalTitle?r.a.createElement("h2",{className:"c-modal__title"},e.modalTitle):"",a="small"===e.type?"c-modal__container--small":"",c=Object(n.useRef)();Object(n.useEffect)(function(){return setTimeout(function(){return c.current.style.setProperty("--modal-opacity",1)},100),function(){c.current.style.setProperty("--modal-opacity",0)}},[]);return r.a.createElement("div",{className:"c-modal",ref:c},r.a.createElement("div",{className:"c-modal__container ".concat(a)},t,e.children,r.a.createElement(M.a,{icon:"times",className:"c-modal__button-close",onClick:function(){return c.current.style.setProperty("--modal-opacity",0),void setTimeout(function(){e.hideModal(),e.onClose&&e.onClose()},100)}})))})),Y=(a(155),function(e){var t=e.noResize?"c-textarea--no-resize":"",a=e.extraClass?e.extraClass:"",n=e.error?"c-textarea--error":"";return r.a.createElement("div",{className:"c-textarea"},e.labelText&&r.a.createElement("label",{className:"c-textarea__label",htmlFor:e.id},e.labelText),r.a.createElement("textarea",{className:"c-textarea__field ".concat(n," ").concat(t," ").concat(a),placeholder:e.placeholder,onKeyUp:e.onKeyUp,defaultValue:e.value?e.value:""}))});function Z(e,t){return e.length>=t?"".concat(e.slice(0,t),"..."):e}a(156);var $=Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setBoards:function(t){return e(p(t))}}})(function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],o=a[1],i=function(t){t.preventDefault(),o(!0),function(e,t){return z.apply(this,arguments)}(e.id,e.state.dataUser.user).then(function(){F(e.state.dataUser.user).then(function(t){o(!1),e.hideModal(),e.setBoards(t)}).catch(function(){return e.setBoards([])})})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("figure",{className:"c-board-card"},r.a.createElement("h3",{className:"c-board-card__name"},r.a.createElement(s.b,{to:"/trollelo/TaskBoard/".concat(e.id)},e.name)),r.a.createElement("p",null," ",Z(e.description,250)," "),r.a.createElement("div",{className:"c-board-card__delete",onClick:function(){return e.showModal("modal-remove-board".concat(e.id))}},r.a.createElement(M.a,{icon:"trash"}),"Remove")),e.state.modal==="modal-remove-board".concat(e.id)&&r.a.createElement(J,null,r.a.createElement(Q,{modalTitle:"Remove board",type:"small"},r.a.createElement("form",null,r.a.createElement("p",{className:"margin-bottom-20"},r.a.createElement("span",{className:"bold"},"Are you sure")," to remove this Board?"),r.a.createElement(B,{text:"Remove Board",onClick:function(e){return i(e)},isLoading:c})))))}),ee=(a(157),Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setBoards:function(t){return e(p(t))}}})(function(e){var t=Object(n.useState)({name:"",description:"",errorMessage:"Complete all the fields",isValid:!0}),a=Object(E.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),l=Object(E.a)(s,2),d=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(E.a)(f,2),b=p[0],h=p[1];Object(n.useEffect)(function(){e.state.isLogin&&F(e.state.dataUser.user).then(function(t){e.setBoards(t),m(!1)}).catch(function(t){e.setBoards([]),m(!1)})},[]);var g=function(t){t.preventDefault(),0!==c.name.length&&0!==c.description.length?(h(!0),o(Object(u.a)({},c,{errorMessage:""})),function(e,t,a){return A.apply(this,arguments)}(e.state.dataUser.user,c.name,c.description).then(function(t){o(Object(u.a)({},c,{isValid:!0,name:"",description:""})),e.hideModal(),h(!1),F(e.state.dataUser.user).then(function(t){e.setBoards(t)}).catch(function(){return e.setBoards([])})})):(h(!1),o(Object(u.a)({},c,{isValid:!1})))};return e.state.isLogin?d?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement(V,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement("main",{className:"dashboard"},r.a.createElement("header",{className:"subheader"},r.a.createElement("div",{className:"subheader__content"},r.a.createElement("span",{className:"subheader__icon"},r.a.createElement(M.a,{icon:"align-left"})),r.a.createElement("div",{className:"subheader__title"},r.a.createElement("h2",null,"My Dashboard"),r.a.createElement("span",{className:"subheader__title__user"},"User: ",e.state.dataUser.user))),r.a.createElement("div",{className:"subheader__actions"},r.a.createElement(B,{text:"New Board",onClick:function(){return e.showModal("new-board")}}))),r.a.createElement("section",{className:"dashboard__table"},e.state.userBoards&&e.state.userBoards.map(function(t,a){return r.a.createElement($,{key:a,name:e.state.userBoards[a].name,description:e.state.userBoards[a].description,id:e.state.userBoards[a].id})}),"new-board"===e.state.modal&&r.a.createElement(J,null,r.a.createElement(Q,{modalTitle:"Add new board",type:"small",onClose:function(){o(Object(u.a)({},c,{name:"",description:"",isValid:!0}))}},r.a.createElement("form",{method:"POST"},r.a.createElement(S,{type:"text",id:"newBoardName",placeholder:"Board Name",icon:"columns",extraClass:"margin-bottom-10",onKeyUp:function(e){return o(Object(u.a)({},c,{name:e.target.value}))},error:!1===c.isValid&&!c.name.length,required:!0}),r.a.createElement(Y,{placeholder:"Description",noResize:!0,extraClass:"margin-bottom-20",onKeyUp:function(e){return o(Object(u.a)({},c,{description:e.target.value}))},error:!1===c.isValid&&!c.description.length,required:!0}),r.a.createElement(B,{text:"Create Board",onClick:function(e){return g(e)},isLoading:b}),!1===c.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},c.errorMessage))))))):r.a.createElement(i.a,{from:"/",to:"/login"})}));function te(){return(te=Object(_.a)(O.a.mark(function e(t,a,n){var r,c;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(a);case 2:return r=e.sent,e.next=5,ae(t,a,n,r.tasklists);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t,a,n){return new Promise(function(r,c){var o={title:a,owner:e,tasks:[]};N.collection("boards").doc(t).update({tasklists:[].concat(Object(P.a)(n),[o])}).then(function(){return r(o)}).catch(function(e){return c(e)})})}function ne(){return(ne=Object(_.a)(O.a.mark(function e(t,a){var n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N.collection("boards").doc(a),e.next=3,q(a);case 3:return r=e.sent,e.next=6,n.update({tasklists:r.tasklists.filter(function(e,a){return a!==t})});case 6:return e.next=8,q(a);case 8:return r=e.sent,e.abrupt("return",r.tasklists);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t){return new Promise(function(a,n){var r=oe(),c=x.ref("images/".concat(e,"/").concat(r).concat(t.name)).put(t);c.on("state_changed",function(e){},function(e){n(e)},function(){c.snapshot.ref.getDownloadURL().then(function(e){a({downloadURL:e,name:"".concat(r).concat(t.name)})})})})}function ce(e,t){return new Promise(function(a,n){x.ref("images/".concat(e,"/").concat(t)).delete().then(function(){return a()}).catch(function(e){return n()})})}var oe=function(){return Math.random().toString(6).substring(2,7)+Math.random().toString(6).substring(2,7)};function se(e,t,a,n,r,c){var o=N.collection("boards").doc(r.id);return new Promise(function(s,i){var l={title:e,description:t,owner:n,image:{taskImage:a?a.downloadURL:null,taskImageName:a?a.name:null},tags:[],comments:[]};r.tasklists[c].tasks=[].concat(Object(P.a)(r.tasklists[c].tasks),[l]),o.set(r).then(function(){return s(r)}).catch(function(e){return i(e)})})}function ie(){return(ie=Object(_.a)(O.a.mark(function e(t,a,n,r,c,o){var s,i,l;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(c);case 2:if(s=e.sent,null===n){e.next=9;break}return e.next=6,re(r,n);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:return i=e.t0,e.next=13,se(t,a,i,r,s,o);case 13:return l=e.sent,e.abrupt("return",l);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e,t,a,n,r,c,o){var s=N.collection("boards").doc(r.id),i=r;return new Promise(function(r,l){var u={title:e,description:t,owner:n,image:{taskImage:a?a.downloadURL:null,taskImageName:a?a.name:null},tags:[],comments:[]};i.tasklists[c].tasks[o]=u,s.set(i).then(function(){return r(i)}).catch(function(e){return l(e)})})}function ue(){return(ue=Object(_.a)(O.a.mark(function e(t,a,n,r,c,o,s){var i,l,u;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(c);case 2:if(i=e.sent,null===n){e.next=9;break}return e.next=6,re(r,n);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:return l=e.t0,e.next=13,le(t,a,l,r,i,o,s);case 13:return u=e.sent,e.abrupt("return",{boardUpdate:u,image:l});case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e,t,a){var n=N.collection("boards").doc(e.id),r=e,c=!!e.tasklists[t].tasks[a].taskImage;return new Promise(function(e,o){r.tasklists[t].tasks=r.tasklists[t].tasks.filter(function(e,t){return t!==a}),n.set(r).then(function(){return e(r,c)}).catch(function(e){return o(e)})})}function me(){return(me=Object(_.a)(O.a.mark(function e(t,a,n,r,c){var o,s;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:return o=e.sent,e.next=5,de(o,a,n);case 5:if(!(s=e.sent).hasImage){e.next=9;break}return e.next=9,ce(r,c);case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}a(158);var fe=Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setDataBoard:function(t){return e(b(t))}}})(function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!1),i=Object(E.a)(s,2),l=i[0],d=i[1],m=Object(n.useState)({title:e.task.title,description:e.task.description,picture:null,imageUrl:e.task.image.taskImage,errorMessage:"Complete the title field",isValid:!0}),f=Object(E.a)(m,2),p=f[0],b=f[1],h=function(t){t.preventDefault(),o(!0),p.title.length?(o(!0),function(e,t,a,n,r,c,o){return ue.apply(this,arguments)}(p.title,p.description,p.picture,e.state.dataUser.user,e.state.boardData.id,e.idTaskList,e.idTask).then(function(t){e.setDataBoard(t.boardUpdate),b(Object(u.a)({},p,{imageUrl:t.image?t.image.downloadURL:null})),o(!1),e.hideModal()})):(o(!1),b(Object(u.a)({},p,{isValid:!1})))},g=function(t){t.preventDefault(),d(!0);var a=e.state.boardData.tasklists[e.idTaskList].tasks[e.idTask].image.taskImageName;(function(e,t,a,n,r){return me.apply(this,arguments)})(e.state.boardData.id,e.idTaskList,e.idTask,e.state.dataUser.user,a).then(function(t){d(!1),e.setDataBoard(t),e.hideModal()})},k=e.state.boardData.tasklists[e.idTaskList].tasks[e.idTask].image.taskImage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"c-task",onClick:function(t){return e.showModal("task-".concat(e.idTask).concat(e.idTaskList))}},k&&r.a.createElement("img",{className:"c-task__picture",src:k,alt:"alt"}),r.a.createElement("h3",{className:"c-task__title"},Z(e.task.title,150))),e.state.modal==="task-".concat(e.idTask).concat(e.idTaskList)&&r.a.createElement(J,null,r.a.createElement(Q,{modalTitle:p.title,onClose:function(){b(Object(u.a)({},p,{title:e.task.title,description:e.task.description,picture:null,imageUrl:e.task.image.taskImage,isValid:!0}))}},r.a.createElement("form",{method:"POST"},r.a.createElement(S,{type:"text",id:"taskTitle",labelText:"Title:",icon:"columns",extraClass:"margin-bottom-20",required:!0,error:!1===p.isValid&&!p.title.length,value:p.title,onKeyUp:function(e){return b(Object(u.a)({},p,{title:e.target.value}))}}),r.a.createElement(Y,{labelText:"Description:",extraClass:"margin-bottom-20",value:p.description,onKeyUp:function(e){return b(Object(u.a)({},p,{description:e.target.value}))}}),p.imageUrl&&r.a.createElement("div",{className:"c-task__update__image"},r.a.createElement("p",{className:"bold"},"Image:"),r.a.createElement("img",{src:p.imageUrl,alt:p.title}),r.a.createElement(B,{extraClass:"c-task__update__image__remove",text:"Remove Image",secondary:!0,size:"small",onClick:function(e){return function(e){e.preventDefault(),b(Object(u.a)({},p,{imageUrl:null,picture:null}))}(e)}})),!p.imageUrl&&r.a.createElement(S,{type:"file",id:"imageTask",labelText:"Image:",icon:"columns",extraClass:"margin-bottom-20",onChange:function(e){return function(e){var t=e.target.files[0];if("image/png"===t.type||"image/jpeg"===t.type){var a=new FileReader;a.onloadend=function(){return b(Object(u.a)({},p,{picture:t}))},a.readAsDataURL(t)}else b(Object(u.a)({},p,{errorMessage:"Invalid file format"}))}(e)}}),r.a.createElement(B,{text:"Update task",onClick:function(e){return h(e)},isLoading:c}),r.a.createElement(B,{text:"Remove task",extraClass:"margin-left-10",secondary:!0,onClick:function(e){return g(e)},isLoading:l}),!1===p.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},p.errorMessage)))))}),pe=(a(159),Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setDataBoard:function(t){return e(b(t))}}})(function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)({title:"",description:"",errorMessage:"Complete the title field",isValid:!0,picture:null}),i=Object(E.a)(s,2),l=i[0],d=i[1],m=function(t){t.preventDefault(),o(!0),function(e,t){return ne.apply(this,arguments)}(e.id,e.state.boardData.id).then(function(t){e.hideModal(),o(!1),e.setDataBoard(Object(u.a)({},e.state.boardData,{tasklists:t}))})},f=function(t,a){t.preventDefault(),o(!0),l.title.length?(o(!0),d(Object(u.a)({},l,{errorMessage:""})),function(e,t,a,n,r,c){return ie.apply(this,arguments)}(l.title,l.description,l.picture,e.state.dataUser.user,e.state.boardData.id,a).then(function(t){e.setDataBoard(t),o(!1),d(Object(u.a)({},l,{title:"",description:"",isValid:!0,picture:null})),e.hideModal()})):(o(!1),d(Object(u.a)({},l,{isValid:!1})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"c-tasklist","data-id":e.id},r.a.createElement("header",{className:"c-tasklist__header"},r.a.createElement("h2",{className:"c-tasklist__header__title",title:e.name},Z(e.name,140)),r.a.createElement("span",{className:"c-tasklist__header__remove",onClick:function(){return e.showModal("remove-tasklist-".concat(e.id))}},r.a.createElement(M.a,{icon:"trash-alt"}))),r.a.createElement("main",{className:"c-tasklist__tasks"},e.state.boardData.tasklists[e.id].tasks.map(function(t,a){return r.a.createElement(fe,{key:a,task:t,idTaskList:e.id,idTask:a})})),r.a.createElement("footer",{className:"c-tasklist__footer"},r.a.createElement("span",{className:"c-tasklist__footer__add-task",onClick:function(){return e.showModal("add-task-".concat(e.id))}},"+ Add task"))),e.state.modal==="remove-tasklist-".concat(e.id)&&r.a.createElement(J,null,r.a.createElement(Q,{modalTitle:"Remove task",type:"small"},r.a.createElement("form",null,r.a.createElement("p",{className:"margin-bottom-20"},r.a.createElement("span",{className:"bold"},"Are you sure")," to remove this tasklist?"),r.a.createElement(B,{text:"Remove Board",onClick:function(e){return m(e)},isLoading:c})))),e.state.modal==="add-task-".concat(e.id)&&r.a.createElement(J,null,r.a.createElement(Q,{modalTitle:"Add new task",type:"small",onClose:function(){d(Object(u.a)({},l,{title:"",description:"",isValid:!0}))}},r.a.createElement("form",{method:"POST"},r.a.createElement(S,{type:"text",id:"newTaskTitle",placeholder:"Task title",icon:"columns",extraClass:"margin-bottom-10",onKeyUp:function(e){return d(Object(u.a)({},l,{title:e.target.value}))},error:!1===l.isValid&&!l.title.length,required:!0}),r.a.createElement(Y,{placeholder:"Description",noResize:!0,extraClass:"margin-bottom-20",onKeyUp:function(e){return d(Object(u.a)({},l,{description:e.target.value}))}}),r.a.createElement(S,{type:"file",id:"imageTask",labelText:"Image:",icon:"columns",extraClass:"margin-bottom-20",onChange:function(e){return function(e){var t=e.target.files[0];if("image/png"===t.type||"image/jpeg"===t.type){var a=new FileReader;a.onloadend=function(){return d(Object(u.a)({},l,{picture:t}))},a.readAsDataURL(t)}else d(Object(u.a)({},l,{errorMessage:"Invalid file format"}))}(e)}}),r.a.createElement(B,{text:"Create new task",onClick:function(t){return f(t,e.id)},isLoading:c}),!1===l.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},l.errorMessage)))))})),be=(a(160),Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setDataBoard:function(t){return e(b(t))}}})(function(e){var t=Object(n.useState)({name:"",errorMessage:"Complete all the fields",isValid:!0}),a=Object(E.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),l=Object(E.a)(s,2),d=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(E.a)(f,2),b=p[0],h=p[1];Object(n.useEffect)(function(){e.state.isLogin&&q(e.match.params.board).then(function(t){e.setDataBoard(t),m(!1)})},[]);var g=function(t){t.preventDefault(),0!==c.name.length?(h(!0),o(Object(u.a)({},c,{errorMessage:""})),function(e,t,a){return te.apply(this,arguments)}(e.state.dataUser.user,e.state.boardData.id,c.name).then(function(t){e.setDataBoard(Object(u.a)({},e.state.boardData,{tasklists:[].concat(Object(P.a)(e.state.boardData.tasklists),[t])})),h(!1),e.hideModal()})):(h(!1),o(Object(u.a)({},c,{isValid:!1})))};return e.state.isLogin?d?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement(V,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(H,e),r.a.createElement("main",{className:"taskboard"},r.a.createElement("header",{className:"subheader"},r.a.createElement("div",{className:"subheader__content"},r.a.createElement("span",{className:"subheader__icon"},r.a.createElement(M.a,{icon:"pencil-alt"})),r.a.createElement("div",{className:"subheader__title"},r.a.createElement("h2",null,"Board: ",e.state.boardData.name),r.a.createElement("span",{className:"subheader__title__user"},"Owner: ",e.state.boardData.owner))),r.a.createElement("div",{className:"subheader__actions"},r.a.createElement(B,{text:"New Task List",onClick:function(){return e.showModal("new-task-list")}}))),r.a.createElement("section",{className:"taskboard__table"},r.a.createElement("div",{className:"taskboard__table__scroll-wrap"},e.state.boardData.tasklists&&e.state.boardData.tasklists.map(function(e,t){return r.a.createElement(pe,{key:t,id:t,name:e.title})}))),"new-task-list"===e.state.modal&&r.a.createElement(J,null,r.a.createElement(Q,{modalTitle:"Add new task list",type:"small"},r.a.createElement("form",{method:"POST"},r.a.createElement(S,{type:"text",id:"newTaskListName",placeholder:"Task list Name",icon:"pencil-alt",extraClass:"margin-bottom-20",onKeyUp:function(e){return o(Object(u.a)({},c,{name:e.target.value}))},error:!1===c.isValid&&!c.name.length,required:!0}),r.a.createElement(B,{text:"Create Task list",onClick:function(e){return g(e)},isLoading:b}),!1===c.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},c.errorMessage)))))):r.a.createElement(i.a,{from:"/",to:"/login"})})),he=Object(l.b)(function(e){return{state:e}},null)(function(e){return Object(n.useEffect)(function(){document.title="Trollelo"},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/trollelo/login",render:function(e){return r.a.createElement(I,e)}}),r.a.createElement(i.b,{exact:!0,path:"/trollelo/dashboard",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(i.b,{path:"/trollelo/taskBoard/:board",render:function(e){return r.a.createElement(be,e)}}),r.a.createElement(i.a,{from:"/",to:"/trollelo/login"}),r.a.createElement(i.a,{from:"/",to:e.state.isLogin?"/trollelo/dashboard":"/trollelo/login"}),r.a.createElement(i.b,{render:function(){return r.a.createElement("div",null,"Page not found")}})))}),ge=a(30),Ee=a(13);ge.b.add(Ee.f,Ee.b,Ee.h,Ee.k,Ee.d,Ee.c,Ee.i,Ee.a,Ee.g,Ee.e,Ee.j);ge.b,a(161);var ke=document.getElementById("root");o.a.render(r.a.createElement(l.a,{store:g},r.a.createElement(s.a,null,r.a.createElement(i.b,{path:"/",component:he}))),ke)},78:function(e,t,a){e.exports=a(162)},87:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.6f6d8c77.chunk.js.map